require(["jquery","storiesList","jQueryUI","inheritance","flickrWidget","wikiPediaWidget","youtubeWidget"],function(e,t){var n={getWidgetKey:function(){var t=e(".tabs").find(".selected").first().attr("rel"),n=e.trim(t).toLowerCase();if(!n||n&&n.length===0)n="stories";return n},getCurrentWidget:function(){var e=n.getWidgetKey(),t=a[e];return t},displayCurrentWidget:function(t){var r=n.getCurrentWidget(),i=n.getWidgetKey();if(r){var s=a[n.previousWidgetKey];s&&s.hide(),r.wasDisplayed?(r.show(),r.displayContent()):(e("#widgetsDisplay").append(r.container),r.displayContent(),r.wasDisplayed=!0),n.previousWidgetKey=i,e(n).triggerHandler("widgetChanged",{widgetName:i})}}};n.parts=[];var r=Class.extend({container:"<div></div>",show:function(){e(this.container).show()},hide:function(){e(this.container).hide()},instance:null,wasDisplayed:!1}),i=r.extend({displayContent:function(t){e(this.container).flickrFy({text:window.contentData.flickrText,defaultImageThumb:"s",itemsPerRow:4}),this.instance=e(this.container).data("flickrFy")},getIcon:function(){return"/images/photokamera.png"}});i.prototype.container=e("<div id='divContent'><div class='photoFeed'></div><div class='paging' id='photoPaging'></div></div>"),n.parts[n.parts.length]=i;var s=r.extend({displayContent:function(){e(this.container).wikiFy({imageLoading:"/images/ajax-loader-big.gif",page:window.contentData.wikiPage}),this.instance=e(this.container).data("wikiFy")},getIcon:function(){return"/images/wikipedia.png"}});s.prototype.container=e("<div id='wikiMain' ><div id='divBreadCrumb'></div><div class ='articles'></div></div>"),n.parts[n.parts.length]=s;var o=r.extend({displayContent:function(){e(this.container).youTubeFy({query:window.contentData.youTubeQuery}),this.instance=e(this.container).data("youTubeFy")},getIcon:function(){return"/images/kamera.png"}});o.prototype.container=e("<div id='youTubeMain'><div id='videos'></div><div id='videoPaging' class='paging'></div></div>");var u=r.extend({displayContent:function(){this.storiesList.searchStories(e(this.container),{isPublished:!0,rowsToSkip:0,geoItemId:window.contentData.geoItem.geonameId,tags:window.contentData.tags}),this.instance=t},getIcon:function(){return"/images/idea.jpg"}});u.prototype.storiesList=t,u.prototype.container=e("<div id='divContent'></div>"),n.parts[n.parts.length]=u;var a={article:new s,photos:new i,videos:new o,stories:new u};(function(e){e.widget("custom.contentify",{options:{},_create:function(){var t=e('<div class="tabs"><span class="widgetTitle  selected" rel="stories"><a rel="stories"><img src="/images/idea.jpg"></a><a class="tabTitle" rel="stories">Things To Do</a></span><span class="widgetTitle" rel="videos"><a rel="videos"><img src="/images/kamera.png"></a><a class="tabTitle" rel="videos">Videos</a></span><span class="widgetTitle" rel="photos"><a rel="photos"><img src="/images/photokamera.png"></a><a class="tabTitle" rel="photos">Photos</a></span><span class="widgetTitle" rel="article"><a rel="article"><img src="/images/wikipedia.png"></a><a class="tabTitle" rel="article">Wikipedia</a></span></div><div id="widgetsDisplay"></div>').appendTo(this.element);e(".widgetTitle").addClass("hover-shadow");var r=e(t).find(".widgetTitle");e(r).on("click",function(t){t.preventDefault(),e(r).removeClass("selected"),e(this).addClass("selected"),n.displayCurrentWidget()})},_init:function(){try{n.displayCurrentWidget()}catch(e){console&&console.error&&console.error("Error occurred when calling content widget ",e)}},_setOption:function(t,n){switch(t){case"clear":}e.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){e.Widget.prototype.destroy.call(this)}})})(jQuery)})