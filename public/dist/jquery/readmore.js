(function(e){function i(i,s){this.element=i,this.options=e.extend({},n,s),e(this.element).data("max-height",this.options.maxHeight),delete this.options.maxHeight;if(this.options.embedCSS&&!r){var o=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }";(function(e,t){var n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(n)})(document,o),r=!0}this._defaults=n,this._name=t,this.init()}var t="readmore",n={speed:100,maxHeight:200,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,sectionCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},r=!1;i.prototype={init:function(){var t=this;e(this.element).each(function(){var n=e(this),r=n.css("max-height").replace(/[^-\d\.]/g,"")>n.data("max-height")?n.css("max-height").replace(/[^-\d\.]/g,""):n.data("max-height");n.addClass("readmore-js-section"),n.css("max-height")!="none"&&n.css("max-height","none"),n.data("boxHeight",n.outerHeight(!0));if(n.outerHeight(!0)<r)return!0;n.data("sliderHeight",r);var i=t.options.startOpen?t.options.lessLink:t.options.moreLink;n.after(e(i).on("click",function(e){t.toggleSlider(this,n,e)}).addClass("readmore-js-toggle")),t.options.startOpen||n.css({height:r})})},toggleSlider:function(t,n,r){r.preventDefault();var i=this,s=newLink="",o=!1,u=e(n).data("sliderHeight");e(n).height()==u?(s=e(n).data().boxHeight+"px",newLink="lessLink",o=!0):(s=u,newLink="moreLink"),i.options.beforeToggle(t,n,o),e(n).animate({height:s},{duration:i.options.speed}),e(t).replaceWith(e(i.options[newLink]).on("click",function(e){i.toggleSlider(this,n,e)}).addClass("readmore-js-toggle")),i.options.afterToggle(t,n,o)}},e.fn[t]=function(n){var r=arguments;if(n===undefined||typeof n=="object")return this.each(function(){e.data(this,"plugin_"+t)||e.data(this,"plugin_"+t,new i(this,n))});if(typeof n=="string"&&n[0]!=="_"&&n!=="init")return this.each(function(){var s=e.data(this,"plugin_"+t);s instanceof i&&typeof s[n]=="function"&&s[n].apply(s,Array.prototype.slice.call(r,1))})}})(jQuery)