define("geonames",["jquery"],function(){var e={};e.EU="Europe",e.AF="Africa",e.AS="Asia",e.SA="South America",e.NA="North America",e.OC="Oceania",e.AN="Antarctica";var t={};t.Europe="EU",t.Africa="AF",t.Asia="AS",t["South-America"]="SA",t["North-America"]="NA",t.Oceania="OC",t.Antarctica="AN";var n={defaults:{style:"full",maxRows:12,startRow:0}};return n.ITEM_TYPE={CITY:1,COUNTRY:2,CONTINENT:3},n.serviceSearchPoint="/SearchGeoNames",n.getItemType=function(e){var t={type:n.ITEM_TYPE,name:"City"}},n.getItemFromUrl=function(e,t){e=$.trim(e).replace(/-/g," "),$.trim(e).length==0&&t(null);var r=n.getItemMetaFromUrl(e);n.search({query:r.name,continentCode:r.continentCode},function(e){var i=n.findGeoNameItem(e,r);t(i)})},n.getItemUrl=function(t,r){var i=n.getAdminCodeName(t,"/"),s="";e[t.continentCode]?s="/"+e[t.continentCode]:r&&e[r.continentCode]&&(s="/"+e[r.continentCode]);var o=s;return $.trim(t.countryName).length!=0&&(o=o+"/"+t.countryName),$.trim(i).length!=0&&(o=o+"/"+i),o.indexOf("/",o.length-"/".length)==-1&&(o+="/"),o+=t.name,o=$.trim(o).replace(/ /g,"-"),o="/content"+o,o=window.location.protocol+"//"+window.location.host+o,o},n.getItemLabel=function(e){var t=e.name,n="";return e.countryName&&e.countryName!=e.name&&(n=","+e.countryName),t+=n,t},n.getByLetter=function(e,t){e||t(null);var r=$.extend(!0,this.defaults,e),i=$.ajax({url:n.serviceSearchPoint,dataType:"jsonp",data:r});i.success(function(e){t(e)}),i.error(function(e){t(null)})},n.search=function(e,t){e||t(null);var r=$.ajax({url:n.serviceSearchPoint,dataType:"jsonp",data:{style:e.style||"full",maxRows:e.maxRows||12,q:e.query,isNameRequired:e.isNameRequired||!0,continentCode:e.continentCode}});r.success(function(e){t(e)}),r.error(function(e){t(null)})},n.getAdminCodeName=function(e,t){t||(t=",");var n="";for(var r=1;r<5;r++){var i=e["adminName"+r];i&&isNaN(i)&&(n=n+i+t)}return n},n.getItemMetaFromUrl=function(e){var n=e.split("/"),r={};return r.continentCode=t[n[0]],r.countryName=n[1],r.adminName1=n.length>=2?n[2]:"",r.adminName2=n.length>=3?n[3]:"",r.adminName3=n.length>=4?n[4]:"",r.adminName4=n.length>=5?n[5]:"",r.name=n[n.length-1],r},n.findGeoNameItem=function(e,t){var r=null;if(e.totalResultsCount==1)r=e.geonames[0];else{for(var i=0;i<e.geonames.length;i++){var s=e.geonames[i],o=n.strEquals(s.name,t.name)&&n.strEquals(s.countryName,t.countryName)&&n.strEquals(s.adminName1,t.adminName1)&&n.strEquals(s.adminName2,t.adminName2)&&n.strEquals(s.adminName3,t.adminName3)&&n.strEquals(s.adminName4,t.adminName4);if(o){r=s;break}}r||(r=e.geonames[0])}return r},n.getItemChildren=function(e,t){var n=$.ajax({url:"/GetChildren",dataType:"jsonp",data:{geonameId:e.geonameId}});n.success(function(e){t(e)}),n.error(function(e){t(null)})},n.strEquals=function(e,t){return $.trim(e)===$.trim(t)},n})