(function(){"use strict";var a={version:"0.1.0",_maxAttempts:20,_init:function(){return typeof document!="undefined"&&(this._doc=document,this._head=this._doc.getElementsByTagName("head")[0],this._IE7_8_9_StylesheetLimit=30,this._intervalToCheckLink=700),this},_jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},_applyCss:function(a){var b=this._doc.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),this._head.appendChild(b)},_getIEVersion:function(){var a=-1;if(navigator.appName==="Microsoft Internet Explorer"){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");c.exec(b)!==null&&(a=parseFloat(RegExp.$1))}return a},_checkIeLimitWorkaround:function(a,b){var c=this._doc,d=!1,e=this._getIEVersion(),f=e!==-1&&e<=9?!0:!1;try{if(c.createStyleSheet&&c.styleSheets&&c.styleSheets.length>this._IE7_8_9_StylesheetLimit){var g=c.styleSheets[c.styleSheets.length-1];g.addImport(a,c.styleSheets.length-1),d=!0,b()}}catch(h){this._onerror(b,h),d=!1}return d},_getUniqueId:function(){return"cssPreloader_"+Math.round(Math.random()*9999999999)},_createLink:function(a){var b=this._doc.createElement("link");return b.rel="stylesheet",b.type="text/css",b.id=this._getUniqueId(),b.href=a,b},_isEventSupported:function(a,b){var c=document.createElement(a);b="on"+b;var d=b in c;return d||(c.setAttribute(b,"return;"),d=typeof c[b]=="function",c=null),d},_loadNative:function(a,b){var c=this._createLink(a);c.onload=function(){b()};var d=this;c.onerror=function(){d._onerror(b)},this._head.appendChild(c)},_onerror:function(a,b){if(Object.prototype.toString.call(a.error)==="[object Function]"){var c={message:"Failed to load stylesheet",innerException:b};a.error(c)}},_loadWhenNotSupported:function(a,b){var c=function(a,b,d){try{if(!(d<this._maxAttempts)){this._onerror(b);return}var e=document.styleSheets;for(var f=0;f<e.length;f++){var g=e[f],h=g.ownerNode?g.ownerNode:g.owningElement;if(h&&h.id===a.id){var i=!0,j=null;try{g.cssRules?j=g.cssRules:g.rules?j=g.rules:i=!1}catch(k){i=!1}if(i){if(j&&j.length&&j.length>0){b();return}this._onerror(b);return}b()}}var l=this;setTimeout(function(){c.call(l,a,b,++d)},this._intervalToCheckLink)}catch(k){this._onerror(b,k);return}},d=this._createLink(a);this._head.appendChild(d);var e=this,f=0;setTimeout(function(){c.call(e,d,b,f)},this._intervalToCheckLink)},loadStylesheet:function(a,b){var c=this._checkIeLimitWorkaround(a,b);c||(this._isEventSupported("link","load")?this._loadNative(a,b):this._loadWhenNotSupported(a,b))},load:function(a,b,c,d){try{if(d.isBuild){c();return}var e=b.toUrl(a.search(/\.(css)$/i)===-1?a+".css":a);this._intervalToCheckLink=d&&d.waitSeconds?d.waitSeconds/this._maxAttempts:700,this.loadStylesheet(e,c)}catch(f){c()}}};typeof define=="function"?define(function(){return a._init()}):window&&(window.css=a._init())})();